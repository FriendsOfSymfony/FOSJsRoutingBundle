function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_ref=function(){"use strict";var e=function(){function e(t,n){_classCallCheck(this,e),this.context_=t||{base_url:"",prefix:"",host:"",scheme:""},this.setRoutes(n||{})}return _createClass(e,[{key:"setRoutes",value:function(e){this.routes_=Object.freeze(e)}},{key:"getRoutes",value:function(){return this.routes_}},{key:"setBaseUrl",value:function(e){this.context_.base_url=e}},{key:"getBaseUrl",value:function(){return this.context_.base_url}},{key:"setPrefix",value:function(e){this.context_.prefix=e}},{key:"setScheme",value:function(e){this.context_.scheme=e}},{key:"getScheme",value:function(){return this.context_.scheme}},{key:"setHost",value:function(e){this.context_.host=e}},{key:"getHost",value:function(){return this.context_.host}},{key:"buildQueryParams",value:function(e,t,n){var o=this,r=void 0,i=new RegExp(/\[\]$/);if(t instanceof Array)t.forEach(function(t,r){i.test(e)?n(e,t):o.buildQueryParams(e+"["+("object"===("undefined"==typeof t?"undefined":_typeof(t))?r:"")+"]",t,n)});else if("object"===("undefined"==typeof t?"undefined":_typeof(t)))for(r in t)this.buildQueryParams(e+"["+r+"]",t[r],n);else n(e,t)}},{key:"getRoute",value:function(e){var t=this.context_.prefix+e;if(t in this.routes_)e=t;else if(!(e in this.routes_))throw new Error('The route "'+e+'" does not exist.');return this.routes_[e]}},{key:"generate",value:function(e,t,n){var o=this,r=this.getRoute(e),i=t||{},u=Object.assign({},i),s="",f=!0,a="";return r.tokens.forEach(function(t){if("text"===t[0])return s=t[1]+s,void(f=!1);{if("variable"!==t[0])throw new Error('The token type "'+t[0]+'" is not supported.');var n=r.defaults&&t[3]in r.defaults;if(!1===f||!n||t[3]in i&&i[t[3]]!=r.defaults[t[3]]){var o=void 0;if(t[3]in i)o=i[t[3]],delete u[t[3]];else{if(!n){if(f)return;throw new Error('The route "'+e+'" requires the parameter "'+t[3]+'".')}o=r.defaults[t[3]]}var a=!0===o||!1===o||""===o;if(!a||!f){var c=encodeURIComponent(o).replace(/%2F/g,"/");"null"===c&&null===o&&(c=""),s=t[1]+c+s}f=!1}else n&&t[3]in u&&delete u[t[3]]}}),""===s&&(s="/"),r.hosttokens.forEach(function(e){var t=void 0;return"text"===e[0]?void(a=e[1]+a):void("variable"===e[0]&&(e[3]in i?(t=i[e[3]],delete u[e[3]]):r.defaults&&e[3]in r.defaults&&(t=r.defaults[e[3]]),a=e[1]+t+a))}),s=this.context_.base_url+s,r.requirements&&"_scheme"in r.requirements&&this.getScheme()!=r.requirements._scheme?s=r.requirements._scheme+"://"+(a||this.getHost())+s:a&&this.getHost()!==a?s=this.getScheme()+"://"+a+s:n===!0&&(s=this.getScheme()+"://"+this.getHost()+s),Object.keys(u).length>0&&!function(){var e=void 0,t=[],n=function(e,n){n="function"==typeof n?n():n,n=null===n?"":n,t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))};for(e in u)o.buildQueryParams(e,u[e],n);s=s+"?"+t.join("&").replace(/%20/g,"+")}(),s}}],[{key:"getInstance",value:function(){return t}},{key:"setData",value:function(t){var n=e.getInstance();n.setBaseUrl(t.base_url),n.setRoutes(t.routes),"prefix"in t&&n.setPrefix(t.prefix),n.setHost(t.host),n.setScheme(t.scheme)}}]),e}();e.Route,e.Context;var t=new e;return{Router:e,Routing:t}}(),Router=_ref.Router,Routing=_ref.Routing;"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(module.exports=Routing,module.exports.Router=Router):"function"==typeof window.define&&window.define.amd?(window.define("Router",[],function(){return Router}),window.define("Routing",[],function(){return Routing})):("undefined"==typeof window.fos&&(window.fos={}),window.fos.Router=Router,window.Routing=Routing);